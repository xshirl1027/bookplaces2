{"version":3,"sources":["webpack:///src/app/bookings/bookings.page.html","webpack:///src/app/bookings/bookings.module.ts","webpack:///src/app/bookings/bookings.page.scss","webpack:///src/app/bookings/bookings.page.ts"],"names":["routes","path","component","BookingsPageModule","imports","forChild","declarations","BookingsPage","bookingService","loadingCtrl","alertCtrl","isLoading","bookingSub","bookings","subscribe","loadedBookings","fetchBookings","bookingId","slidingEl","create","header","message","buttons","text","role","handler","close","console","log","then","loadingEl","present","cancelBooking","dismiss","ctrl","unsubscribe","selector","template"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACSf,UAAMA,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAgBaC,kBAAkB;AAAA;AAAA,O;;AAAlBA,wBAAkB,6DAT9B,+DAAS;AACRC,eAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,6DAAaC,QAAb,CAAsBL,MAAtB,CAJO,CADD;AAORM,oBAAY,EAAE,CAAC,2DAAD;AAPN,OAAT,CAS8B,GAAlBH,kBAAkB,CAAlB;;;;;;;;;;;;;;;;ACzBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCYFI,YAAY;AAKvB,8BACUC,cADV,EAEUC,WAFV,EAGUC,SAHV,EAGoC;AAAA;;AAF1B,eAAAF,cAAA,GAAAA,cAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AACA,eAAAC,SAAA,GAAAA,SAAA;AANV,eAAAC,SAAA,GAAY,KAAZ;AAOI;;AATmB;AAAA;AAAA,qCAWZ;AAAA;;AACT,iBAAKC,UAAL,GAAkB,KAAKJ,cAAL,CAAoBK,QAApB,CAA6BC,SAA7B,CAAuC,UAAAD,QAAQ,EAAI;AACnE,mBAAI,CAACE,cAAL,GAAsBF,QAAtB;AACD,aAFiB,CAAlB;AAGD;AAfsB;AAAA;AAAA,6CAiBJ;AAAA;;AACjB,iBAAKF,SAAL,GAAiB,IAAjB;AACA,iBAAKH,cAAL,CAAoBQ,aAApB,GAAoCF,SAApC,CAA8C,YAAM;AAClD,oBAAI,CAACH,SAAL,GAAiB,KAAjB;AACD,aAFD;AAGD;AAtBsB;AAAA;AAAA,0CAwBPM,SAxBO,EAwBYC,SAxBZ,EAwBuC;AAAA;;AAC5D,iBAAKR,SAAL,CAAeS,MAAf,CAAsB;AAACC,oBAAM,EAAE,QAAT;AAAmBC,qBAAO,EAAE,0CAA5B;AAAwEC,qBAAO,EAAE,CAAC;AACtGC,oBAAI,EAAE,QADgG;AAEtGC,oBAAI,EAAE,QAFgG;AAGtGC,uBAAO,EAAE,mBAAM;AACbP,2BAAS,CAACQ,KAAV;AACAC,yBAAO,CAACC,GAAR,CAAY,gBAAZ;AACD;AANqG,eAAD,EAQvG;AACEL,oBAAI,EAAE,QADR;AAEEE,uBAAO,EAAE,mBAAM;AACbP,2BAAS,CAACQ,KAAV;;AACA,wBAAI,CAACjB,WAAL,CAAiBU,MAAjB,CAAwB;AAAEE,2BAAO,EAAE;AAAX,mBAAxB,EAAsDQ,IAAtD,CAA2D,UAAAC,SAAS,EAAI;AACtEA,6BAAS,CAACC,OAAV;;AACA,0BAAI,CAACvB,cAAL,CAAoBwB,aAApB,CAAkCf,SAAlC,EAA6CH,SAA7C,CAAuD,YAAM;AAC3DgB,+BAAS,CAACG,OAAV;AACD,qBAFD;AAGD,mBALD;AAMD;AAVH,eARuG;AAAjF,aAAtB,EAoBCJ,IApBD,CAoBM,UAACK,IAAD,EAAU;AACdA,kBAAI,CAACH,OAAL;AACD,aAtBD;AAwBD;AAjDsB;AAAA;AAAA,wCAmDT;AACZ,gBAAI,KAAKnB,UAAT,EAAqB;AACnB,mBAAKA,UAAL,CAAgBuB,WAAhB;AACD;AACF;AAvDsB;;AAAA;AAAA,S;;;;gBARhB;;gBAHiC;;gBAAjC;;;;AAWI5B,kBAAY,6DALxB,gEAAU;AACT6B,gBAAQ,EAAE,cADD;AAETC,gBAAQ,EAAR;AAAA;AAAA,kGAFS;;;;AAAA,OAAV,CAKwB,GAAZ9B,YAAY,CAAZ","file":"bookings-bookings-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>Your Bookings</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col size-md=\\\"6\\\" offset-md=\\\"3\\\" class=\\\"ion-text-center\\\" *ngIf=\\\"isLoading\\\">\\n        <ion-spinner color=\\\"primary\\\"></ion-spinner>\\n      </ion-col>\\n      <ion-col\\n        size-md=\\\"6\\\"\\n        offset-md=\\\"3\\\"\\n        *ngIf=\\\"!isLoading && (!loadedBookings || loadedBookings.length <= 0)\\\"\\n        class=\\\"ion-text-center\\\"\\n      >\\n        <p>No bookings found!</p>\\n      </ion-col>\\n      <ion-col\\n        size-md=\\\"6\\\"\\n        offset-md=\\\"3\\\"\\n        *ngIf=\\\"!isLoading && loadedBookings && loadedBookings.length > 0\\\"\\n      >\\n        <ion-list>\\n          <ion-item-sliding\\n            *ngFor=\\\"let booking of loadedBookings\\\"\\n            #slidingBooking\\n          >\\n            <ion-item>\\n              <ion-avatar slot=\\\"start\\\">\\n                  <ion-img src=\\\"https://lonelyplanetimages.imgix.net/mastheads/GettyImages-538096543_medium.jpg?sharp=10&vib=20&w=1200\\\"></ion-img>\\n              </ion-avatar>\\n              <ion-label>\\n                <h5>{{ booking.placeTitle }}</h5>\\n                <p class=\\\"date\\\"><b>From:</b> {{ booking.bookedFrom.toLocaleString() }} <b>To:</b>{{ booking.bookedTo.toLocaleString() }}</p>\\n                <p>Guests: {{ booking.guestNumber }}</p>\\n              </ion-label>\\n            </ion-item>\\n            <ion-item-options>\\n              <ion-item-option\\n                color=\\\"danger\\\"\\n                (click)=\\\"onCancelBooking(booking.id, slidingBooking)\\\"\\n              >\\n                <ion-icon name=\\\"trash\\\" slot=\\\"icon-only\\\"></ion-icon>\\n              </ion-item-option>\\n            </ion-item-options>\\n          </ion-item-sliding>\\n        </ion-list>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { BookingsPage } from './bookings.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BookingsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [BookingsPage]\n})\nexport class BookingsPageModule {}\n","export default \".date {\\n  white-space: nowrap;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYm9va2luZ3MvYm9va2luZ3MucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksbUJBQUE7QUFDSiIsImZpbGUiOiJzcmMvYXBwL2Jvb2tpbmdzL2Jvb2tpbmdzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5kYXRle1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59Il19 */\";","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { AlertController, IonItemSliding, LoadingController } from '@ionic/angular';\nimport { Subscription } from 'rxjs';\n\nimport { BookingService } from './booking.service';\nimport { Booking } from './booking.model';\n\n@Component({\n  selector: 'app-bookings',\n  templateUrl: './bookings.page.html',\n  styleUrls: ['./bookings.page.scss']\n})\nexport class BookingsPage implements OnInit, OnDestroy {\n  loadedBookings: Booking[];\n  isLoading = false;\n  private bookingSub: Subscription;\n\n  constructor(\n    private bookingService: BookingService,\n    private loadingCtrl: LoadingController,\n    private alertCtrl: AlertController\n  ) {}\n\n  ngOnInit() {\n    this.bookingSub = this.bookingService.bookings.subscribe(bookings => {\n      this.loadedBookings = bookings;\n    });\n  }\n\n  ionViewWillEnter() {\n    this.isLoading = true;\n    this.bookingService.fetchBookings().subscribe(() => {\n      this.isLoading = false;\n    });\n  }\n\n  onCancelBooking(bookingId: string, slidingEl: IonItemSliding) {\n    this.alertCtrl.create({header: \"Delete\", message: \"Are you sure you want to delete booking?\", buttons: [{\n      text: 'Cancel',\n      role: 'cancel',\n      handler: () => {\n        slidingEl.close();\n        console.log('Cancel clicked');\n      }\n    },\n    {\n      text: 'Delete',\n      handler: () => {\n        slidingEl.close();\n        this.loadingCtrl.create({ message: 'Cancelling...' }).then(loadingEl => {\n          loadingEl.present();\n          this.bookingService.cancelBooking(bookingId).subscribe(() => {\n            loadingEl.dismiss();\n          });\n        });\n      }\n    }]})\n    .then((ctrl) => {\n      ctrl.present();\n    });\n   \n  }\n\n  ngOnDestroy() {\n    if (this.bookingSub) {\n      this.bookingSub.unsubscribe();\n    }\n  }\n}\n"]}